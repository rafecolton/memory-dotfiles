#!/usr/bin/env ruby
# vim:fileencoding=utf-8

class MemoryDotfiles
  attr_reader :var_path, :bin_path

  def initialize
    @var_path = ENV['MDF_VAR_PATH'] || '/usr/local/var/mdf'
    @bin_path = ENV['MDF_BIN_PATH'] || '/usr/local/bin'
  end

  def usage
    puts 'This is how you use `mdf`'
  end
  alias_method :'-h', :usage
  alias_method :'--help', :usage

  def uninstall
    puts "uninstalling mdf..."

    system <<-EOB
    if [ -f #{@bin_path}/mdf ] ; then
      rm #{@bin_path}/mdf
    fi

    if [ -d #{@var_path} ] ; then
      rm -rf #{@var_path}
    fi
    EOB

    puts "...done"
  end
end

if $0 == __FILE__
  command = ARGV.shift.to_sym

  mdf = MemoryDotfiles.new
  if mdf.respond_to?(command)
    mdf.send(command)
    exit 0
  else
    mdf.usage
    exit 1
  end
end

# vim:filetype=ruby
